<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>

<!--
<div class="td-toc"><nav id="TableOfContents"><div>
            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Detector">Detector</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Detector.__init__">Detector</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.copy_detector">copy_detector</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.autoplace">autoplace</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.get_distance">get_distance</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.shiftToDistance">shiftToDistance</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.shiftByDistance">shiftByDistance</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.get_PointList3D">get_PointList3D</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.get_PointList2D">get_PointList2D</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.get_PointList2DCentre">get_PointList2DCentre</a>
                        </li>
                        <li>
                                <a class="function" href="#Detector.get_Delays">get_Delays</a>
                        </li>
                </ul>

            </li>
    </ul>

</div></nav></div>
-->


<div class="pdoc">
                <section id="Detector">
                            <input id="Detector-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Detector</span>:

                <label class="view-source-button" for="Detector-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector-26"><a href="#Detector-26"><span class="linenos"> 26</span></a><span class="k">class</span> <span class="nc">Detector</span><span class="p">:</span>
</span><span id="Detector-27"><a href="#Detector-27"><span class="linenos"> 27</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-28"><a href="#Detector-28"><span class="linenos"> 28</span></a><span class="sd">    A detector is simply a plane in 3D-lab-space.</span>
</span><span id="Detector-29"><a href="#Detector-29"><span class="linenos"> 29</span></a><span class="sd">    It is defined by a point Detector.centre and its</span>
</span><span id="Detector-30"><a href="#Detector-30"><span class="linenos"> 30</span></a><span class="sd">    normal vector Detector.normal (thought to point towards the incoming rays).</span>
</span><span id="Detector-31"><a href="#Detector-31"><span class="linenos"> 31</span></a><span class="sd">    These are optional arguments when creating a Detector-instance, because they can</span>
</span><span id="Detector-32"><a href="#Detector-32"><span class="linenos"> 32</span></a><span class="sd">    later be set automatically by the method Detector.autoplace().</span>
</span><span id="Detector-33"><a href="#Detector-33"><span class="linenos"> 33</span></a><span class="sd">    The Detector has a reference point &quot;RefPoint&quot;, with respect to which a distance</span>
</span><span id="Detector-34"><a href="#Detector-34"><span class="linenos"> 34</span></a><span class="sd">    can be returned via the method Detector.get distance.</span>
</span><span id="Detector-35"><a href="#Detector-35"><span class="linenos"> 35</span></a>
</span><span id="Detector-36"><a href="#Detector-36"><span class="linenos"> 36</span></a><span class="sd">    Attributes</span>
</span><span id="Detector-37"><a href="#Detector-37"><span class="linenos"> 37</span></a><span class="sd">    ----------</span>
</span><span id="Detector-38"><a href="#Detector-38"><span class="linenos"> 38</span></a><span class="sd">        centre : np.ndarray</span>
</span><span id="Detector-39"><a href="#Detector-39"><span class="linenos"> 39</span></a><span class="sd">            3D Point in the Detector plane.</span>
</span><span id="Detector-40"><a href="#Detector-40"><span class="linenos"> 40</span></a>
</span><span id="Detector-41"><a href="#Detector-41"><span class="linenos"> 41</span></a><span class="sd">        normal : np.ndarray</span>
</span><span id="Detector-42"><a href="#Detector-42"><span class="linenos"> 42</span></a><span class="sd">           3D Normal vector on the Detector plane.</span>
</span><span id="Detector-43"><a href="#Detector-43"><span class="linenos"> 43</span></a>
</span><span id="Detector-44"><a href="#Detector-44"><span class="linenos"> 44</span></a><span class="sd">        refpoint : np.ndarray</span>
</span><span id="Detector-45"><a href="#Detector-45"><span class="linenos"> 45</span></a><span class="sd">            3D reference point from which to measure the Detector distance.</span>
</span><span id="Detector-46"><a href="#Detector-46"><span class="linenos"> 46</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Detector-47"><a href="#Detector-47"><span class="linenos"> 47</span></a>
</span><span id="Detector-48"><a href="#Detector-48"><span class="linenos"> 48</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RefPoint</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">Centre</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Normal</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Detector-49"><a href="#Detector-49"><span class="linenos"> 49</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-50"><a href="#Detector-50"><span class="linenos"> 50</span></a><span class="sd">        Parameters</span>
</span><span id="Detector-51"><a href="#Detector-51"><span class="linenos"> 51</span></a><span class="sd">        ----------</span>
</span><span id="Detector-52"><a href="#Detector-52"><span class="linenos"> 52</span></a><span class="sd">            RefPoint : np.ndarray</span>
</span><span id="Detector-53"><a href="#Detector-53"><span class="linenos"> 53</span></a><span class="sd">                3D Reference point from which to measure the Detector distance.</span>
</span><span id="Detector-54"><a href="#Detector-54"><span class="linenos"> 54</span></a>
</span><span id="Detector-55"><a href="#Detector-55"><span class="linenos"> 55</span></a><span class="sd">            Centre : np.ndarray, optional</span>
</span><span id="Detector-56"><a href="#Detector-56"><span class="linenos"> 56</span></a><span class="sd">               3D Point in the Detector plane.</span>
</span><span id="Detector-57"><a href="#Detector-57"><span class="linenos"> 57</span></a>
</span><span id="Detector-58"><a href="#Detector-58"><span class="linenos"> 58</span></a><span class="sd">            Normal : np.ndarray, optional</span>
</span><span id="Detector-59"><a href="#Detector-59"><span class="linenos"> 59</span></a><span class="sd">               3D Normal vector on the Detector plane.</span>
</span><span id="Detector-60"><a href="#Detector-60"><span class="linenos"> 60</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-61"><a href="#Detector-61"><span class="linenos"> 61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="o">=</span> <span class="n">Centre</span>
</span><span id="Detector-62"><a href="#Detector-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">Normal</span>
</span><span id="Detector-63"><a href="#Detector-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span> <span class="o">=</span> <span class="n">RefPoint</span>
</span><span id="Detector-64"><a href="#Detector-64"><span class="linenos"> 64</span></a>
</span><span id="Detector-65"><a href="#Detector-65"><span class="linenos"> 65</span></a>    <span class="nd">@property</span>
</span><span id="Detector-66"><a href="#Detector-66"><span class="linenos"> 66</span></a>    <span class="k">def</span> <span class="nf">centre</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Detector-67"><a href="#Detector-67"><span class="linenos"> 67</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_centre</span>
</span><span id="Detector-68"><a href="#Detector-68"><span class="linenos"> 68</span></a>
</span><span id="Detector-69"><a href="#Detector-69"><span class="linenos"> 69</span></a>    <span class="c1"># a setter function</span>
</span><span id="Detector-70"><a href="#Detector-70"><span class="linenos"> 70</span></a>    <span class="nd">@centre</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Detector-71"><a href="#Detector-71"><span class="linenos"> 71</span></a>    <span class="k">def</span> <span class="nf">centre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Centre</span><span class="p">):</span>
</span><span id="Detector-72"><a href="#Detector-72"><span class="linenos"> 72</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">Centre</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="ow">and</span> <span class="n">Centre</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)</span> <span class="ow">or</span> <span class="n">Centre</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Detector-73"><a href="#Detector-73"><span class="linenos"> 73</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_centre</span> <span class="o">=</span> <span class="n">Centre</span>
</span><span id="Detector-74"><a href="#Detector-74"><span class="linenos"> 74</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector-75"><a href="#Detector-75"><span class="linenos"> 75</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Detector Centre must be a 3D-vector, given as numpy.ndarray of shape (3,).&quot;</span><span class="p">)</span>
</span><span id="Detector-76"><a href="#Detector-76"><span class="linenos"> 76</span></a>
</span><span id="Detector-77"><a href="#Detector-77"><span class="linenos"> 77</span></a>    <span class="nd">@property</span>
</span><span id="Detector-78"><a href="#Detector-78"><span class="linenos"> 78</span></a>    <span class="k">def</span> <span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Detector-79"><a href="#Detector-79"><span class="linenos"> 79</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normal</span>
</span><span id="Detector-80"><a href="#Detector-80"><span class="linenos"> 80</span></a>
</span><span id="Detector-81"><a href="#Detector-81"><span class="linenos"> 81</span></a>    <span class="nd">@normal</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Detector-82"><a href="#Detector-82"><span class="linenos"> 82</span></a>    <span class="k">def</span> <span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Normal</span><span class="p">):</span>
</span><span id="Detector-83"><a href="#Detector-83"><span class="linenos"> 83</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">Normal</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="ow">and</span> <span class="n">Normal</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">Normal</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Detector-84"><a href="#Detector-84"><span class="linenos"> 84</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_normal</span> <span class="o">=</span> <span class="n">Normal</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">Normal</span><span class="p">)</span>
</span><span id="Detector-85"><a href="#Detector-85"><span class="linenos"> 85</span></a>        <span class="k">elif</span> <span class="n">Normal</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Detector-86"><a href="#Detector-86"><span class="linenos"> 86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_normal</span> <span class="o">=</span> <span class="n">Normal</span>
</span><span id="Detector-87"><a href="#Detector-87"><span class="linenos"> 87</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector-88"><a href="#Detector-88"><span class="linenos"> 88</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Detector Normal must be a 3D-vector of norm &gt;0, given as numpy.ndarray of shape (3,).&quot;</span><span class="p">)</span>
</span><span id="Detector-89"><a href="#Detector-89"><span class="linenos"> 89</span></a>
</span><span id="Detector-90"><a href="#Detector-90"><span class="linenos"> 90</span></a>    <span class="nd">@property</span>
</span><span id="Detector-91"><a href="#Detector-91"><span class="linenos"> 91</span></a>    <span class="k">def</span> <span class="nf">refpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Detector-92"><a href="#Detector-92"><span class="linenos"> 92</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refpoint</span>
</span><span id="Detector-93"><a href="#Detector-93"><span class="linenos"> 93</span></a>
</span><span id="Detector-94"><a href="#Detector-94"><span class="linenos"> 94</span></a>    <span class="c1"># a setter function</span>
</span><span id="Detector-95"><a href="#Detector-95"><span class="linenos"> 95</span></a>    <span class="nd">@refpoint</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Detector-96"><a href="#Detector-96"><span class="linenos"> 96</span></a>    <span class="k">def</span> <span class="nf">refpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RefPoint</span><span class="p">):</span>
</span><span id="Detector-97"><a href="#Detector-97"><span class="linenos"> 97</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">RefPoint</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="ow">and</span> <span class="n">RefPoint</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,):</span>
</span><span id="Detector-98"><a href="#Detector-98"><span class="linenos"> 98</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_refpoint</span> <span class="o">=</span> <span class="n">RefPoint</span>
</span><span id="Detector-99"><a href="#Detector-99"><span class="linenos"> 99</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector-100"><a href="#Detector-100"><span class="linenos">100</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Detector RefPoint must a 3D-vector, given as numpy.ndarray of shape (3,).&quot;</span><span class="p">)</span>
</span><span id="Detector-101"><a href="#Detector-101"><span class="linenos">101</span></a>
</span><span id="Detector-102"><a href="#Detector-102"><span class="linenos">102</span></a>    <span class="c1"># %% METHODS FOR PLACING THE DETECTOR ##################################################################</span>
</span><span id="Detector-103"><a href="#Detector-103"><span class="linenos">103</span></a>
</span><span id="Detector-104"><a href="#Detector-104"><span class="linenos">104</span></a>    <span class="k">def</span> <span class="nf">copy_detector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Detector-105"><a href="#Detector-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-106"><a href="#Detector-106"><span class="linenos">106</span></a><span class="sd">        Returns a new Detector object with the same properties.</span>
</span><span id="Detector-107"><a href="#Detector-107"><span class="linenos">107</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-108"><a href="#Detector-108"><span class="linenos">108</span></a>        <span class="k">return</span> <span class="n">Detector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span><span id="Detector-109"><a href="#Detector-109"><span class="linenos">109</span></a>
</span><span id="Detector-110"><a href="#Detector-110"><span class="linenos">110</span></a>    <span class="k">def</span> <span class="nf">autoplace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">,</span> <span class="n">DistanceDetector</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Detector-111"><a href="#Detector-111"><span class="linenos">111</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-112"><a href="#Detector-112"><span class="linenos">112</span></a><span class="sd">        Automatically place and orient the detector such that it is normal to the central ray</span>
</span><span id="Detector-113"><a href="#Detector-113"><span class="linenos">113</span></a><span class="sd">        of the supplied RayList, at the distance DistanceDetector the origin point of that central ray.</span>
</span><span id="Detector-114"><a href="#Detector-114"><span class="linenos">114</span></a>
</span><span id="Detector-115"><a href="#Detector-115"><span class="linenos">115</span></a><span class="sd">        Parameters</span>
</span><span id="Detector-116"><a href="#Detector-116"><span class="linenos">116</span></a><span class="sd">        ----------</span>
</span><span id="Detector-117"><a href="#Detector-117"><span class="linenos">117</span></a><span class="sd">            RayList : list[Ray]</span>
</span><span id="Detector-118"><a href="#Detector-118"><span class="linenos">118</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector-119"><a href="#Detector-119"><span class="linenos">119</span></a>
</span><span id="Detector-120"><a href="#Detector-120"><span class="linenos">120</span></a><span class="sd">            DistanceDetector : float</span>
</span><span id="Detector-121"><a href="#Detector-121"><span class="linenos">121</span></a><span class="sd">                The distance at which to place the Detector.</span>
</span><span id="Detector-122"><a href="#Detector-122"><span class="linenos">122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-123"><a href="#Detector-123"><span class="linenos">123</span></a>        <span class="n">CentralRay</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">FindCentralRay</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector-124"><a href="#Detector-124"><span class="linenos">124</span></a>        <span class="k">if</span> <span class="n">CentralRay</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Detector-125"><a href="#Detector-125"><span class="linenos">125</span></a>            <span class="n">DetectorNormal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="Detector-126"><a href="#Detector-126"><span class="linenos">126</span></a>            <span class="n">CentralPoint</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="Detector-127"><a href="#Detector-127"><span class="linenos">127</span></a>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">RayList</span><span class="p">:</span>
</span><span id="Detector-128"><a href="#Detector-128"><span class="linenos">128</span></a>                <span class="n">DetectorNormal</span> <span class="o">=</span> <span class="n">DetectorNormal</span> <span class="o">+</span> <span class="n">k</span><span class="o">.</span><span class="n">vector</span>
</span><span id="Detector-129"><a href="#Detector-129"><span class="linenos">129</span></a>                <span class="n">CentralPoint</span> <span class="o">=</span> <span class="n">CentralPoint</span> <span class="o">+</span> <span class="n">k</span><span class="o">.</span><span class="n">point</span>
</span><span id="Detector-130"><a href="#Detector-130"><span class="linenos">130</span></a>            <span class="n">DetectorNormal</span> <span class="o">=</span> <span class="o">-</span><span class="n">DetectorNormal</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector-131"><a href="#Detector-131"><span class="linenos">131</span></a>            <span class="n">CentralPoint</span> <span class="o">=</span> <span class="n">CentralPoint</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector-132"><a href="#Detector-132"><span class="linenos">132</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector-133"><a href="#Detector-133"><span class="linenos">133</span></a>            <span class="n">DetectorNormal</span> <span class="o">=</span> <span class="o">-</span><span class="n">CentralRay</span><span class="o">.</span><span class="n">vector</span>
</span><span id="Detector-134"><a href="#Detector-134"><span class="linenos">134</span></a>            <span class="n">CentralPoint</span> <span class="o">=</span> <span class="n">CentralRay</span><span class="o">.</span><span class="n">point</span>
</span><span id="Detector-135"><a href="#Detector-135"><span class="linenos">135</span></a>
</span><span id="Detector-136"><a href="#Detector-136"><span class="linenos">136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">DetectorNormal</span>
</span><span id="Detector-137"><a href="#Detector-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="o">=</span> <span class="n">CentralPoint</span> <span class="o">-</span> <span class="n">DetectorNormal</span> <span class="o">*</span> <span class="n">DistanceDetector</span>
</span><span id="Detector-138"><a href="#Detector-138"><span class="linenos">138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span> <span class="o">=</span> <span class="n">CentralPoint</span>
</span><span id="Detector-139"><a href="#Detector-139"><span class="linenos">139</span></a>
</span><span id="Detector-140"><a href="#Detector-140"><span class="linenos">140</span></a>    <span class="k">def</span> <span class="nf">get_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Detector-141"><a href="#Detector-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-142"><a href="#Detector-142"><span class="linenos">142</span></a><span class="sd">        Return distance of the Detector-plane from its reference point Detector.refpoint.</span>
</span><span id="Detector-143"><a href="#Detector-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-144"><a href="#Detector-144"><span class="linenos">144</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
</span><span id="Detector-145"><a href="#Detector-145"><span class="linenos">145</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span> <span class="o">-</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">IntersectionLinePlane</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span><span id="Detector-146"><a href="#Detector-146"><span class="linenos">146</span></a>        <span class="p">)</span>
</span><span id="Detector-147"><a href="#Detector-147"><span class="linenos">147</span></a>
</span><span id="Detector-148"><a href="#Detector-148"><span class="linenos">148</span></a>    <span class="k">def</span> <span class="nf">shiftToDistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">NewDistance</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Detector-149"><a href="#Detector-149"><span class="linenos">149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-150"><a href="#Detector-150"><span class="linenos">150</span></a><span class="sd">        Shift the Detector to the distance NewDistance from its reference point Detector.refpoint.</span>
</span><span id="Detector-151"><a href="#Detector-151"><span class="linenos">151</span></a>
</span><span id="Detector-152"><a href="#Detector-152"><span class="linenos">152</span></a><span class="sd">        Parameters</span>
</span><span id="Detector-153"><a href="#Detector-153"><span class="linenos">153</span></a><span class="sd">        ----------</span>
</span><span id="Detector-154"><a href="#Detector-154"><span class="linenos">154</span></a><span class="sd">            NewDistance : float</span>
</span><span id="Detector-155"><a href="#Detector-155"><span class="linenos">155</span></a><span class="sd">                The distance (absolute) to which to shift the Detector.</span>
</span><span id="Detector-156"><a href="#Detector-156"><span class="linenos">156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-157"><a href="#Detector-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewDistance</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewDistance</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewDistance</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">:</span>
</span><span id="Detector-158"><a href="#Detector-158"><span class="linenos">158</span></a>            <span class="n">shiftby</span> <span class="o">=</span> <span class="n">NewDistance</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_distance</span><span class="p">()</span>  <span class="c1"># by that much in the self.normal-direction</span>
</span><span id="Detector-159"><a href="#Detector-159"><span class="linenos">159</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector-160"><a href="#Detector-160"><span class="linenos">160</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The new Detector Distance must be int or float.&quot;</span><span class="p">)</span>
</span><span id="Detector-161"><a href="#Detector-161"><span class="linenos">161</span></a>
</span><span id="Detector-162"><a href="#Detector-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_centre</span> <span class="o">+=</span> <span class="o">-</span><span class="n">shiftby</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span>
</span><span id="Detector-163"><a href="#Detector-163"><span class="linenos">163</span></a>
</span><span id="Detector-164"><a href="#Detector-164"><span class="linenos">164</span></a>    <span class="k">def</span> <span class="nf">shiftByDistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Shift</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Detector-165"><a href="#Detector-165"><span class="linenos">165</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-166"><a href="#Detector-166"><span class="linenos">166</span></a><span class="sd">        Shift the Detector *by* the distance Shift along its normal vector Detector.normal.</span>
</span><span id="Detector-167"><a href="#Detector-167"><span class="linenos">167</span></a>
</span><span id="Detector-168"><a href="#Detector-168"><span class="linenos">168</span></a><span class="sd">        Parameters</span>
</span><span id="Detector-169"><a href="#Detector-169"><span class="linenos">169</span></a><span class="sd">        ----------</span>
</span><span id="Detector-170"><a href="#Detector-170"><span class="linenos">170</span></a><span class="sd">            Shift : float</span>
</span><span id="Detector-171"><a href="#Detector-171"><span class="linenos">171</span></a><span class="sd">                The distance (relative) *by* which to shift the Detector.</span>
</span><span id="Detector-172"><a href="#Detector-172"><span class="linenos">172</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-173"><a href="#Detector-173"><span class="linenos">173</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">Shift</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">Shift</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">Shift</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">:</span>
</span><span id="Detector-174"><a href="#Detector-174"><span class="linenos">174</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_centre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="o">-</span> <span class="n">Shift</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span>  <span class="c1"># directly set _centre, i.e. circumvent setter</span>
</span><span id="Detector-175"><a href="#Detector-175"><span class="linenos">175</span></a>            <span class="c1"># because we already checked shift here, and centre</span>
</span><span id="Detector-176"><a href="#Detector-176"><span class="linenos">176</span></a>            <span class="c1"># and normal have been checked before</span>
</span><span id="Detector-177"><a href="#Detector-177"><span class="linenos">177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector-178"><a href="#Detector-178"><span class="linenos">178</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The Detector Distance Shift must be int or float.&quot;</span><span class="p">)</span>
</span><span id="Detector-179"><a href="#Detector-179"><span class="linenos">179</span></a>
</span><span id="Detector-180"><a href="#Detector-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">_iscomplete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Detector-181"><a href="#Detector-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-182"><a href="#Detector-182"><span class="linenos">182</span></a><span class="sd">        Checks whether the Detector plane is defined by a centre-point and normal-vector.</span>
</span><span id="Detector-183"><a href="#Detector-183"><span class="linenos">183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-184"><a href="#Detector-184"><span class="linenos">184</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Detector-185"><a href="#Detector-185"><span class="linenos">185</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The detector has no centre and normal vectors defined yet.&quot;</span><span class="p">)</span>
</span><span id="Detector-186"><a href="#Detector-186"><span class="linenos">186</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Detector-187"><a href="#Detector-187"><span class="linenos">187</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector-188"><a href="#Detector-188"><span class="linenos">188</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Detector-189"><a href="#Detector-189"><span class="linenos">189</span></a>
</span><span id="Detector-190"><a href="#Detector-190"><span class="linenos">190</span></a>    <span class="c1"># %% METHODS TO GET THE DETECTOR REPONSE ##################################################################</span>
</span><span id="Detector-191"><a href="#Detector-191"><span class="linenos">191</span></a>
</span><span id="Detector-192"><a href="#Detector-192"><span class="linenos">192</span></a>    <span class="k">def</span> <span class="nf">get_PointList3D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="Detector-193"><a href="#Detector-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-194"><a href="#Detector-194"><span class="linenos">194</span></a><span class="sd">        Returns the list of 3D-points in lab-space where the rays in the</span>
</span><span id="Detector-195"><a href="#Detector-195"><span class="linenos">195</span></a><span class="sd">        list RayList hit the detector plane.</span>
</span><span id="Detector-196"><a href="#Detector-196"><span class="linenos">196</span></a>
</span><span id="Detector-197"><a href="#Detector-197"><span class="linenos">197</span></a><span class="sd">        Parameters</span>
</span><span id="Detector-198"><a href="#Detector-198"><span class="linenos">198</span></a><span class="sd">        ----------</span>
</span><span id="Detector-199"><a href="#Detector-199"><span class="linenos">199</span></a><span class="sd">            RayList : list[Ray]</span>
</span><span id="Detector-200"><a href="#Detector-200"><span class="linenos">200</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector-201"><a href="#Detector-201"><span class="linenos">201</span></a>
</span><span id="Detector-202"><a href="#Detector-202"><span class="linenos">202</span></a><span class="sd">        Returns</span>
</span><span id="Detector-203"><a href="#Detector-203"><span class="linenos">203</span></a><span class="sd">        ----------</span>
</span><span id="Detector-204"><a href="#Detector-204"><span class="linenos">204</span></a><span class="sd">            ListPointDetector3D : list[np.ndarray of shape (3,)]</span>
</span><span id="Detector-205"><a href="#Detector-205"><span class="linenos">205</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-206"><a href="#Detector-206"><span class="linenos">206</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iscomplete</span><span class="p">():</span>
</span><span id="Detector-207"><a href="#Detector-207"><span class="linenos">207</span></a>            <span class="n">ListPointDetector3D</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Detector-208"><a href="#Detector-208"><span class="linenos">208</span></a>            <span class="n">append</span> <span class="o">=</span> <span class="n">ListPointDetector3D</span><span class="o">.</span><span class="n">append</span>
</span><span id="Detector-209"><a href="#Detector-209"><span class="linenos">209</span></a>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">RayList</span><span class="p">:</span>
</span><span id="Detector-210"><a href="#Detector-210"><span class="linenos">210</span></a>                <span class="n">append</span><span class="p">(</span><span class="n">mgeo</span><span class="o">.</span><span class="n">IntersectionLinePlane</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">vector</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">))</span>
</span><span id="Detector-211"><a href="#Detector-211"><span class="linenos">211</span></a>            <span class="k">return</span> <span class="n">ListPointDetector3D</span>
</span><span id="Detector-212"><a href="#Detector-212"><span class="linenos">212</span></a>
</span><span id="Detector-213"><a href="#Detector-213"><span class="linenos">213</span></a>    <span class="k">def</span> <span class="nf">get_PointList2D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="Detector-214"><a href="#Detector-214"><span class="linenos">214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-215"><a href="#Detector-215"><span class="linenos">215</span></a><span class="sd">        Returns the list of 2D-points in the detector plane, with the origin at Detector.centre.</span>
</span><span id="Detector-216"><a href="#Detector-216"><span class="linenos">216</span></a>
</span><span id="Detector-217"><a href="#Detector-217"><span class="linenos">217</span></a><span class="sd">        Parameters</span>
</span><span id="Detector-218"><a href="#Detector-218"><span class="linenos">218</span></a><span class="sd">        ----------</span>
</span><span id="Detector-219"><a href="#Detector-219"><span class="linenos">219</span></a><span class="sd">            RayList : list[Ray]</span>
</span><span id="Detector-220"><a href="#Detector-220"><span class="linenos">220</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector-221"><a href="#Detector-221"><span class="linenos">221</span></a>
</span><span id="Detector-222"><a href="#Detector-222"><span class="linenos">222</span></a><span class="sd">        Returns</span>
</span><span id="Detector-223"><a href="#Detector-223"><span class="linenos">223</span></a><span class="sd">        ----------</span>
</span><span id="Detector-224"><a href="#Detector-224"><span class="linenos">224</span></a><span class="sd">            ListPointDetector2D : list[np.ndarray of shape (2,)]</span>
</span><span id="Detector-225"><a href="#Detector-225"><span class="linenos">225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-226"><a href="#Detector-226"><span class="linenos">226</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iscomplete</span><span class="p">():</span>
</span><span id="Detector-227"><a href="#Detector-227"><span class="linenos">227</span></a>            <span class="n">ListPointDetector3D</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_PointList3D</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector-228"><a href="#Detector-228"><span class="linenos">228</span></a>
</span><span id="Detector-229"><a href="#Detector-229"><span class="linenos">229</span></a>            <span class="n">ListPointDetector3D</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Detector-230"><a href="#Detector-230"><span class="linenos">230</span></a>                <span class="n">k</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ListPointDetector3D</span>
</span><span id="Detector-231"><a href="#Detector-231"><span class="linenos">231</span></a>            <span class="p">]</span>  <span class="c1"># Equivalent to taking the detector&#39;s central point as the origin</span>
</span><span id="Detector-232"><a href="#Detector-232"><span class="linenos">232</span></a>            <span class="n">ListPointDetector3D</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationPointList</span><span class="p">(</span><span class="n">ListPointDetector3D</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</span><span id="Detector-233"><a href="#Detector-233"><span class="linenos">233</span></a>
</span><span id="Detector-234"><a href="#Detector-234"><span class="linenos">234</span></a>            <span class="n">ListPointDetector2D</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ListPointDetector3D</span><span class="p">]</span>
</span><span id="Detector-235"><a href="#Detector-235"><span class="linenos">235</span></a>            <span class="k">return</span> <span class="n">ListPointDetector2D</span>
</span><span id="Detector-236"><a href="#Detector-236"><span class="linenos">236</span></a>
</span><span id="Detector-237"><a href="#Detector-237"><span class="linenos">237</span></a>    <span class="k">def</span> <span class="nf">get_PointList2DCentre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="Detector-238"><a href="#Detector-238"><span class="linenos">238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-239"><a href="#Detector-239"><span class="linenos">239</span></a><span class="sd">        Returns the list of 2D-points in the detector plane, with the origin centered in the point cloud.</span>
</span><span id="Detector-240"><a href="#Detector-240"><span class="linenos">240</span></a>
</span><span id="Detector-241"><a href="#Detector-241"><span class="linenos">241</span></a><span class="sd">        Parameters</span>
</span><span id="Detector-242"><a href="#Detector-242"><span class="linenos">242</span></a><span class="sd">        ----------</span>
</span><span id="Detector-243"><a href="#Detector-243"><span class="linenos">243</span></a><span class="sd">            RayLis* : list[Ray]</span>
</span><span id="Detector-244"><a href="#Detector-244"><span class="linenos">244</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector-245"><a href="#Detector-245"><span class="linenos">245</span></a>
</span><span id="Detector-246"><a href="#Detector-246"><span class="linenos">246</span></a><span class="sd">        Returns</span>
</span><span id="Detector-247"><a href="#Detector-247"><span class="linenos">247</span></a><span class="sd">        ----------</span>
</span><span id="Detector-248"><a href="#Detector-248"><span class="linenos">248</span></a><span class="sd">            ListPointDetector2DCentre : list[np.ndarray of shape (2,)]</span>
</span><span id="Detector-249"><a href="#Detector-249"><span class="linenos">249</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-250"><a href="#Detector-250"><span class="linenos">250</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iscomplete</span><span class="p">():</span>
</span><span id="Detector-251"><a href="#Detector-251"><span class="linenos">251</span></a>            <span class="n">ListPointDetector2D</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_PointList2D</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector-252"><a href="#Detector-252"><span class="linenos">252</span></a>            <span class="n">ListPointDetector2DCentre</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">CentrePointList</span><span class="p">(</span><span class="n">ListPointDetector2D</span><span class="p">)</span>
</span><span id="Detector-253"><a href="#Detector-253"><span class="linenos">253</span></a>            <span class="k">return</span> <span class="n">ListPointDetector2DCentre</span>
</span><span id="Detector-254"><a href="#Detector-254"><span class="linenos">254</span></a>
</span><span id="Detector-255"><a href="#Detector-255"><span class="linenos">255</span></a>    <span class="k">def</span> <span class="nf">get_Delays</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
</span><span id="Detector-256"><a href="#Detector-256"><span class="linenos">256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector-257"><a href="#Detector-257"><span class="linenos">257</span></a><span class="sd">        Returns the list of delays of the rays of RayList as they hit the detector plane,</span>
</span><span id="Detector-258"><a href="#Detector-258"><span class="linenos">258</span></a><span class="sd">        calculated as their total path length divided by the speed of light.</span>
</span><span id="Detector-259"><a href="#Detector-259"><span class="linenos">259</span></a><span class="sd">        The delays are relative to the mean travel time, i.e. the mean path length of RayList</span>
</span><span id="Detector-260"><a href="#Detector-260"><span class="linenos">260</span></a><span class="sd">        divided by the speed of light.</span>
</span><span id="Detector-261"><a href="#Detector-261"><span class="linenos">261</span></a><span class="sd">        The list index corresponds to that of the RayList.</span>
</span><span id="Detector-262"><a href="#Detector-262"><span class="linenos">262</span></a>
</span><span id="Detector-263"><a href="#Detector-263"><span class="linenos">263</span></a><span class="sd">        Parameters</span>
</span><span id="Detector-264"><a href="#Detector-264"><span class="linenos">264</span></a><span class="sd">        ----------</span>
</span><span id="Detector-265"><a href="#Detector-265"><span class="linenos">265</span></a><span class="sd">            RayList : list[Ray]</span>
</span><span id="Detector-266"><a href="#Detector-266"><span class="linenos">266</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector-267"><a href="#Detector-267"><span class="linenos">267</span></a>
</span><span id="Detector-268"><a href="#Detector-268"><span class="linenos">268</span></a><span class="sd">        Returns</span>
</span><span id="Detector-269"><a href="#Detector-269"><span class="linenos">269</span></a><span class="sd">        ----------</span>
</span><span id="Detector-270"><a href="#Detector-270"><span class="linenos">270</span></a><span class="sd">            DelayList : list[float]</span>
</span><span id="Detector-271"><a href="#Detector-271"><span class="linenos">271</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector-272"><a href="#Detector-272"><span class="linenos">272</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iscomplete</span><span class="p">():</span>
</span><span id="Detector-273"><a href="#Detector-273"><span class="linenos">273</span></a>            <span class="n">DetectorPointList3D</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_PointList3D</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector-274"><a href="#Detector-274"><span class="linenos">274</span></a>            <span class="n">OpticalPathList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Detector-275"><a href="#Detector-275"><span class="linenos">275</span></a>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">RayList</span><span class="p">)):</span>
</span><span id="Detector-276"><a href="#Detector-276"><span class="linenos">276</span></a>                <span class="n">OpticalPathList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">RayList</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">point</span> <span class="o">-</span> <span class="n">DetectorPointList3D</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">RayList</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>
</span><span id="Detector-277"><a href="#Detector-277"><span class="linenos">277</span></a>
</span><span id="Detector-278"><a href="#Detector-278"><span class="linenos">278</span></a>            <span class="n">MeanPath</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">OpticalPathList</span><span class="p">)</span>
</span><span id="Detector-279"><a href="#Detector-279"><span class="linenos">279</span></a>            <span class="n">DelayList</span> <span class="o">=</span> <span class="p">[(</span><span class="n">k</span> <span class="o">-</span> <span class="n">MeanPath</span><span class="p">)</span> <span class="o">/</span> <span class="n">LightSpeed</span> <span class="o">*</span> <span class="mf">1e15</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">OpticalPathList</span><span class="p">]</span>  <span class="c1"># in fs, c in mm/s</span>
</span><span id="Detector-280"><a href="#Detector-280"><span class="linenos">280</span></a>            <span class="k">return</span> <span class="n">DelayList</span>
</span></pre></div>


            <div class="docstring"><p>A detector is simply a plane in 3D-lab-space.
It is defined by a point Detector.centre and its
normal vector Detector.normal (thought to point towards the incoming rays).
These are optional arguments when creating a Detector-instance, because they can
later be set automatically by the method <a href="#Detector.autoplace">Detector.autoplace()</a>.
The Detector has a reference point "RefPoint", with respect to which a distance
can be returned via the method Detector.get distance.</p>

<h2 id="attributes">Attributes</h2>

<pre><code>centre : np.ndarray
    3D Point in the Detector plane.

normal : np.ndarray
   3D Normal vector on the Detector plane.

refpoint : np.ndarray
    3D reference point from which to measure the Detector distance.
</code></pre>
</div>


                            <div id="Detector.__init__" class="classattr">
                                        <input id="Detector.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Detector</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">RefPoint</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>, </span><span class="param"><span class="n">Centre</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">Normal</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Detector.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.__init__"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.__init__-48"><a href="#Detector.__init__-48"><span class="linenos">48</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RefPoint</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">Centre</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Normal</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Detector.__init__-49"><a href="#Detector.__init__-49"><span class="linenos">49</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.__init__-50"><a href="#Detector.__init__-50"><span class="linenos">50</span></a><span class="sd">        Parameters</span>
</span><span id="Detector.__init__-51"><a href="#Detector.__init__-51"><span class="linenos">51</span></a><span class="sd">        ----------</span>
</span><span id="Detector.__init__-52"><a href="#Detector.__init__-52"><span class="linenos">52</span></a><span class="sd">            RefPoint : np.ndarray</span>
</span><span id="Detector.__init__-53"><a href="#Detector.__init__-53"><span class="linenos">53</span></a><span class="sd">                3D Reference point from which to measure the Detector distance.</span>
</span><span id="Detector.__init__-54"><a href="#Detector.__init__-54"><span class="linenos">54</span></a>
</span><span id="Detector.__init__-55"><a href="#Detector.__init__-55"><span class="linenos">55</span></a><span class="sd">            Centre : np.ndarray, optional</span>
</span><span id="Detector.__init__-56"><a href="#Detector.__init__-56"><span class="linenos">56</span></a><span class="sd">               3D Point in the Detector plane.</span>
</span><span id="Detector.__init__-57"><a href="#Detector.__init__-57"><span class="linenos">57</span></a>
</span><span id="Detector.__init__-58"><a href="#Detector.__init__-58"><span class="linenos">58</span></a><span class="sd">            Normal : np.ndarray, optional</span>
</span><span id="Detector.__init__-59"><a href="#Detector.__init__-59"><span class="linenos">59</span></a><span class="sd">               3D Normal vector on the Detector plane.</span>
</span><span id="Detector.__init__-60"><a href="#Detector.__init__-60"><span class="linenos">60</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.__init__-61"><a href="#Detector.__init__-61"><span class="linenos">61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="o">=</span> <span class="n">Centre</span>
</span><span id="Detector.__init__-62"><a href="#Detector.__init__-62"><span class="linenos">62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">Normal</span>
</span><span id="Detector.__init__-63"><a href="#Detector.__init__-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span> <span class="o">=</span> <span class="n">RefPoint</span>
</span></pre></div>


            <div class="docstring"><h2 id="parameters">Parameters</h2>

<pre><code>RefPoint : np.ndarray
    3D Reference point from which to measure the Detector distance.

Centre : np.ndarray, optional
   3D Point in the Detector plane.

Normal : np.ndarray, optional
   3D Normal vector on the Detector plane.
</code></pre>
</div>


                            </div>
                            <div id="Detector.copy_detector" class="classattr">
                                        <input id="Detector.copy_detector-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_detector</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Detector.copy_detector-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.copy_detector"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.copy_detector-104"><a href="#Detector.copy_detector-104"><span class="linenos">104</span></a>    <span class="k">def</span> <span class="nf">copy_detector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Detector.copy_detector-105"><a href="#Detector.copy_detector-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.copy_detector-106"><a href="#Detector.copy_detector-106"><span class="linenos">106</span></a><span class="sd">        Returns a new Detector object with the same properties.</span>
</span><span id="Detector.copy_detector-107"><a href="#Detector.copy_detector-107"><span class="linenos">107</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.copy_detector-108"><a href="#Detector.copy_detector-108"><span class="linenos">108</span></a>        <span class="k">return</span> <span class="n">Detector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a new Detector object with the same properties.</p>
</div>


                            </div>
                            <div id="Detector.autoplace" class="classattr">
                                        <input id="Detector.autoplace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">autoplace</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">RayList</span>, </span><span class="param"><span class="n">DistanceDetector</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Detector.autoplace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.autoplace"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.autoplace-110"><a href="#Detector.autoplace-110"><span class="linenos">110</span></a>    <span class="k">def</span> <span class="nf">autoplace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">,</span> <span class="n">DistanceDetector</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Detector.autoplace-111"><a href="#Detector.autoplace-111"><span class="linenos">111</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.autoplace-112"><a href="#Detector.autoplace-112"><span class="linenos">112</span></a><span class="sd">        Automatically place and orient the detector such that it is normal to the central ray</span>
</span><span id="Detector.autoplace-113"><a href="#Detector.autoplace-113"><span class="linenos">113</span></a><span class="sd">        of the supplied RayList, at the distance DistanceDetector the origin point of that central ray.</span>
</span><span id="Detector.autoplace-114"><a href="#Detector.autoplace-114"><span class="linenos">114</span></a>
</span><span id="Detector.autoplace-115"><a href="#Detector.autoplace-115"><span class="linenos">115</span></a><span class="sd">        Parameters</span>
</span><span id="Detector.autoplace-116"><a href="#Detector.autoplace-116"><span class="linenos">116</span></a><span class="sd">        ----------</span>
</span><span id="Detector.autoplace-117"><a href="#Detector.autoplace-117"><span class="linenos">117</span></a><span class="sd">            RayList : list[Ray]</span>
</span><span id="Detector.autoplace-118"><a href="#Detector.autoplace-118"><span class="linenos">118</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector.autoplace-119"><a href="#Detector.autoplace-119"><span class="linenos">119</span></a>
</span><span id="Detector.autoplace-120"><a href="#Detector.autoplace-120"><span class="linenos">120</span></a><span class="sd">            DistanceDetector : float</span>
</span><span id="Detector.autoplace-121"><a href="#Detector.autoplace-121"><span class="linenos">121</span></a><span class="sd">                The distance at which to place the Detector.</span>
</span><span id="Detector.autoplace-122"><a href="#Detector.autoplace-122"><span class="linenos">122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.autoplace-123"><a href="#Detector.autoplace-123"><span class="linenos">123</span></a>        <span class="n">CentralRay</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">FindCentralRay</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector.autoplace-124"><a href="#Detector.autoplace-124"><span class="linenos">124</span></a>        <span class="k">if</span> <span class="n">CentralRay</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Detector.autoplace-125"><a href="#Detector.autoplace-125"><span class="linenos">125</span></a>            <span class="n">DetectorNormal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="Detector.autoplace-126"><a href="#Detector.autoplace-126"><span class="linenos">126</span></a>            <span class="n">CentralPoint</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="Detector.autoplace-127"><a href="#Detector.autoplace-127"><span class="linenos">127</span></a>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">RayList</span><span class="p">:</span>
</span><span id="Detector.autoplace-128"><a href="#Detector.autoplace-128"><span class="linenos">128</span></a>                <span class="n">DetectorNormal</span> <span class="o">=</span> <span class="n">DetectorNormal</span> <span class="o">+</span> <span class="n">k</span><span class="o">.</span><span class="n">vector</span>
</span><span id="Detector.autoplace-129"><a href="#Detector.autoplace-129"><span class="linenos">129</span></a>                <span class="n">CentralPoint</span> <span class="o">=</span> <span class="n">CentralPoint</span> <span class="o">+</span> <span class="n">k</span><span class="o">.</span><span class="n">point</span>
</span><span id="Detector.autoplace-130"><a href="#Detector.autoplace-130"><span class="linenos">130</span></a>            <span class="n">DetectorNormal</span> <span class="o">=</span> <span class="o">-</span><span class="n">DetectorNormal</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector.autoplace-131"><a href="#Detector.autoplace-131"><span class="linenos">131</span></a>            <span class="n">CentralPoint</span> <span class="o">=</span> <span class="n">CentralPoint</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector.autoplace-132"><a href="#Detector.autoplace-132"><span class="linenos">132</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector.autoplace-133"><a href="#Detector.autoplace-133"><span class="linenos">133</span></a>            <span class="n">DetectorNormal</span> <span class="o">=</span> <span class="o">-</span><span class="n">CentralRay</span><span class="o">.</span><span class="n">vector</span>
</span><span id="Detector.autoplace-134"><a href="#Detector.autoplace-134"><span class="linenos">134</span></a>            <span class="n">CentralPoint</span> <span class="o">=</span> <span class="n">CentralRay</span><span class="o">.</span><span class="n">point</span>
</span><span id="Detector.autoplace-135"><a href="#Detector.autoplace-135"><span class="linenos">135</span></a>
</span><span id="Detector.autoplace-136"><a href="#Detector.autoplace-136"><span class="linenos">136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">DetectorNormal</span>
</span><span id="Detector.autoplace-137"><a href="#Detector.autoplace-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="o">=</span> <span class="n">CentralPoint</span> <span class="o">-</span> <span class="n">DetectorNormal</span> <span class="o">*</span> <span class="n">DistanceDetector</span>
</span><span id="Detector.autoplace-138"><a href="#Detector.autoplace-138"><span class="linenos">138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span> <span class="o">=</span> <span class="n">CentralPoint</span>
</span></pre></div>


            <div class="docstring"><p>Automatically place and orient the detector such that it is normal to the central ray
of the supplied RayList, at the distance DistanceDetector the origin point of that central ray.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>RayList : list[Ray]
    A list of objects of the ModuleOpticalRay.Ray-class.

DistanceDetector : float
    The distance at which to place the Detector.
</code></pre>
</div>


                            </div>
                            <div id="Detector.get_distance" class="classattr">
                                        <input id="Detector.get_distance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_distance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Detector.get_distance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.get_distance"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.get_distance-140"><a href="#Detector.get_distance-140"><span class="linenos">140</span></a>    <span class="k">def</span> <span class="nf">get_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Detector.get_distance-141"><a href="#Detector.get_distance-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.get_distance-142"><a href="#Detector.get_distance-142"><span class="linenos">142</span></a><span class="sd">        Return distance of the Detector-plane from its reference point Detector.refpoint.</span>
</span><span id="Detector.get_distance-143"><a href="#Detector.get_distance-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.get_distance-144"><a href="#Detector.get_distance-144"><span class="linenos">144</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
</span><span id="Detector.get_distance-145"><a href="#Detector.get_distance-145"><span class="linenos">145</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span> <span class="o">-</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">IntersectionLinePlane</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refpoint</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span><span id="Detector.get_distance-146"><a href="#Detector.get_distance-146"><span class="linenos">146</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return distance of the Detector-plane from its reference point Detector.refpoint.</p>
</div>


                            </div>
                            <div id="Detector.shiftToDistance" class="classattr">
                                        <input id="Detector.shiftToDistance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">shiftToDistance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">NewDistance</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Detector.shiftToDistance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.shiftToDistance"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.shiftToDistance-148"><a href="#Detector.shiftToDistance-148"><span class="linenos">148</span></a>    <span class="k">def</span> <span class="nf">shiftToDistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">NewDistance</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Detector.shiftToDistance-149"><a href="#Detector.shiftToDistance-149"><span class="linenos">149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.shiftToDistance-150"><a href="#Detector.shiftToDistance-150"><span class="linenos">150</span></a><span class="sd">        Shift the Detector to the distance NewDistance from its reference point Detector.refpoint.</span>
</span><span id="Detector.shiftToDistance-151"><a href="#Detector.shiftToDistance-151"><span class="linenos">151</span></a>
</span><span id="Detector.shiftToDistance-152"><a href="#Detector.shiftToDistance-152"><span class="linenos">152</span></a><span class="sd">        Parameters</span>
</span><span id="Detector.shiftToDistance-153"><a href="#Detector.shiftToDistance-153"><span class="linenos">153</span></a><span class="sd">        ----------</span>
</span><span id="Detector.shiftToDistance-154"><a href="#Detector.shiftToDistance-154"><span class="linenos">154</span></a><span class="sd">            NewDistance : float</span>
</span><span id="Detector.shiftToDistance-155"><a href="#Detector.shiftToDistance-155"><span class="linenos">155</span></a><span class="sd">                The distance (absolute) to which to shift the Detector.</span>
</span><span id="Detector.shiftToDistance-156"><a href="#Detector.shiftToDistance-156"><span class="linenos">156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.shiftToDistance-157"><a href="#Detector.shiftToDistance-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewDistance</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewDistance</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewDistance</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">:</span>
</span><span id="Detector.shiftToDistance-158"><a href="#Detector.shiftToDistance-158"><span class="linenos">158</span></a>            <span class="n">shiftby</span> <span class="o">=</span> <span class="n">NewDistance</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_distance</span><span class="p">()</span>  <span class="c1"># by that much in the self.normal-direction</span>
</span><span id="Detector.shiftToDistance-159"><a href="#Detector.shiftToDistance-159"><span class="linenos">159</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector.shiftToDistance-160"><a href="#Detector.shiftToDistance-160"><span class="linenos">160</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The new Detector Distance must be int or float.&quot;</span><span class="p">)</span>
</span><span id="Detector.shiftToDistance-161"><a href="#Detector.shiftToDistance-161"><span class="linenos">161</span></a>
</span><span id="Detector.shiftToDistance-162"><a href="#Detector.shiftToDistance-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_centre</span> <span class="o">+=</span> <span class="o">-</span><span class="n">shiftby</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span>
</span></pre></div>


            <div class="docstring"><p>Shift the Detector to the distance NewDistance from its reference point Detector.refpoint.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>NewDistance : float
    The distance (absolute) to which to shift the Detector.
</code></pre>
</div>


                            </div>
                            <div id="Detector.shiftByDistance" class="classattr">
                                        <input id="Detector.shiftByDistance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">shiftByDistance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">Shift</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Detector.shiftByDistance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.shiftByDistance"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.shiftByDistance-164"><a href="#Detector.shiftByDistance-164"><span class="linenos">164</span></a>    <span class="k">def</span> <span class="nf">shiftByDistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Shift</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Detector.shiftByDistance-165"><a href="#Detector.shiftByDistance-165"><span class="linenos">165</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.shiftByDistance-166"><a href="#Detector.shiftByDistance-166"><span class="linenos">166</span></a><span class="sd">        Shift the Detector *by* the distance Shift along its normal vector Detector.normal.</span>
</span><span id="Detector.shiftByDistance-167"><a href="#Detector.shiftByDistance-167"><span class="linenos">167</span></a>
</span><span id="Detector.shiftByDistance-168"><a href="#Detector.shiftByDistance-168"><span class="linenos">168</span></a><span class="sd">        Parameters</span>
</span><span id="Detector.shiftByDistance-169"><a href="#Detector.shiftByDistance-169"><span class="linenos">169</span></a><span class="sd">        ----------</span>
</span><span id="Detector.shiftByDistance-170"><a href="#Detector.shiftByDistance-170"><span class="linenos">170</span></a><span class="sd">            Shift : float</span>
</span><span id="Detector.shiftByDistance-171"><a href="#Detector.shiftByDistance-171"><span class="linenos">171</span></a><span class="sd">                The distance (relative) *by* which to shift the Detector.</span>
</span><span id="Detector.shiftByDistance-172"><a href="#Detector.shiftByDistance-172"><span class="linenos">172</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.shiftByDistance-173"><a href="#Detector.shiftByDistance-173"><span class="linenos">173</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">Shift</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">Shift</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">Shift</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">:</span>
</span><span id="Detector.shiftByDistance-174"><a href="#Detector.shiftByDistance-174"><span class="linenos">174</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_centre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="o">-</span> <span class="n">Shift</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span>  <span class="c1"># directly set _centre, i.e. circumvent setter</span>
</span><span id="Detector.shiftByDistance-175"><a href="#Detector.shiftByDistance-175"><span class="linenos">175</span></a>            <span class="c1"># because we already checked shift here, and centre</span>
</span><span id="Detector.shiftByDistance-176"><a href="#Detector.shiftByDistance-176"><span class="linenos">176</span></a>            <span class="c1"># and normal have been checked before</span>
</span><span id="Detector.shiftByDistance-177"><a href="#Detector.shiftByDistance-177"><span class="linenos">177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Detector.shiftByDistance-178"><a href="#Detector.shiftByDistance-178"><span class="linenos">178</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The Detector Distance Shift must be int or float.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Shift the Detector <em>by</em> the distance Shift along its normal vector Detector.normal.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>Shift : float
    The distance (relative) *by* which to shift the Detector.
</code></pre>
</div>


                            </div>
                            <div id="Detector.get_PointList3D" class="classattr">
                                        <input id="Detector.get_PointList3D-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_PointList3D</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">RayList</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Detector.get_PointList3D-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.get_PointList3D"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.get_PointList3D-192"><a href="#Detector.get_PointList3D-192"><span class="linenos">192</span></a>    <span class="k">def</span> <span class="nf">get_PointList3D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="Detector.get_PointList3D-193"><a href="#Detector.get_PointList3D-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.get_PointList3D-194"><a href="#Detector.get_PointList3D-194"><span class="linenos">194</span></a><span class="sd">        Returns the list of 3D-points in lab-space where the rays in the</span>
</span><span id="Detector.get_PointList3D-195"><a href="#Detector.get_PointList3D-195"><span class="linenos">195</span></a><span class="sd">        list RayList hit the detector plane.</span>
</span><span id="Detector.get_PointList3D-196"><a href="#Detector.get_PointList3D-196"><span class="linenos">196</span></a>
</span><span id="Detector.get_PointList3D-197"><a href="#Detector.get_PointList3D-197"><span class="linenos">197</span></a><span class="sd">        Parameters</span>
</span><span id="Detector.get_PointList3D-198"><a href="#Detector.get_PointList3D-198"><span class="linenos">198</span></a><span class="sd">        ----------</span>
</span><span id="Detector.get_PointList3D-199"><a href="#Detector.get_PointList3D-199"><span class="linenos">199</span></a><span class="sd">            RayList : list[Ray]</span>
</span><span id="Detector.get_PointList3D-200"><a href="#Detector.get_PointList3D-200"><span class="linenos">200</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector.get_PointList3D-201"><a href="#Detector.get_PointList3D-201"><span class="linenos">201</span></a>
</span><span id="Detector.get_PointList3D-202"><a href="#Detector.get_PointList3D-202"><span class="linenos">202</span></a><span class="sd">        Returns</span>
</span><span id="Detector.get_PointList3D-203"><a href="#Detector.get_PointList3D-203"><span class="linenos">203</span></a><span class="sd">        ----------</span>
</span><span id="Detector.get_PointList3D-204"><a href="#Detector.get_PointList3D-204"><span class="linenos">204</span></a><span class="sd">            ListPointDetector3D : list[np.ndarray of shape (3,)]</span>
</span><span id="Detector.get_PointList3D-205"><a href="#Detector.get_PointList3D-205"><span class="linenos">205</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.get_PointList3D-206"><a href="#Detector.get_PointList3D-206"><span class="linenos">206</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iscomplete</span><span class="p">():</span>
</span><span id="Detector.get_PointList3D-207"><a href="#Detector.get_PointList3D-207"><span class="linenos">207</span></a>            <span class="n">ListPointDetector3D</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Detector.get_PointList3D-208"><a href="#Detector.get_PointList3D-208"><span class="linenos">208</span></a>            <span class="n">append</span> <span class="o">=</span> <span class="n">ListPointDetector3D</span><span class="o">.</span><span class="n">append</span>
</span><span id="Detector.get_PointList3D-209"><a href="#Detector.get_PointList3D-209"><span class="linenos">209</span></a>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">RayList</span><span class="p">:</span>
</span><span id="Detector.get_PointList3D-210"><a href="#Detector.get_PointList3D-210"><span class="linenos">210</span></a>                <span class="n">append</span><span class="p">(</span><span class="n">mgeo</span><span class="o">.</span><span class="n">IntersectionLinePlane</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">vector</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">))</span>
</span><span id="Detector.get_PointList3D-211"><a href="#Detector.get_PointList3D-211"><span class="linenos">211</span></a>            <span class="k">return</span> <span class="n">ListPointDetector3D</span>
</span></pre></div>


            <div class="docstring"><p>Returns the list of 3D-points in lab-space where the rays in the
list RayList hit the detector plane.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>RayList : list[Ray]
    A list of objects of the ModuleOpticalRay.Ray-class.
</code></pre>

<h2 id="returns">Returns</h2>

<pre><code>ListPointDetector3D : list[np.ndarray of shape (3,)]
</code></pre>
</div>


                            </div>
                            <div id="Detector.get_PointList2D" class="classattr">
                                        <input id="Detector.get_PointList2D-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_PointList2D</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">RayList</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Detector.get_PointList2D-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.get_PointList2D"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.get_PointList2D-213"><a href="#Detector.get_PointList2D-213"><span class="linenos">213</span></a>    <span class="k">def</span> <span class="nf">get_PointList2D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="Detector.get_PointList2D-214"><a href="#Detector.get_PointList2D-214"><span class="linenos">214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.get_PointList2D-215"><a href="#Detector.get_PointList2D-215"><span class="linenos">215</span></a><span class="sd">        Returns the list of 2D-points in the detector plane, with the origin at Detector.centre.</span>
</span><span id="Detector.get_PointList2D-216"><a href="#Detector.get_PointList2D-216"><span class="linenos">216</span></a>
</span><span id="Detector.get_PointList2D-217"><a href="#Detector.get_PointList2D-217"><span class="linenos">217</span></a><span class="sd">        Parameters</span>
</span><span id="Detector.get_PointList2D-218"><a href="#Detector.get_PointList2D-218"><span class="linenos">218</span></a><span class="sd">        ----------</span>
</span><span id="Detector.get_PointList2D-219"><a href="#Detector.get_PointList2D-219"><span class="linenos">219</span></a><span class="sd">            RayList : list[Ray]</span>
</span><span id="Detector.get_PointList2D-220"><a href="#Detector.get_PointList2D-220"><span class="linenos">220</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector.get_PointList2D-221"><a href="#Detector.get_PointList2D-221"><span class="linenos">221</span></a>
</span><span id="Detector.get_PointList2D-222"><a href="#Detector.get_PointList2D-222"><span class="linenos">222</span></a><span class="sd">        Returns</span>
</span><span id="Detector.get_PointList2D-223"><a href="#Detector.get_PointList2D-223"><span class="linenos">223</span></a><span class="sd">        ----------</span>
</span><span id="Detector.get_PointList2D-224"><a href="#Detector.get_PointList2D-224"><span class="linenos">224</span></a><span class="sd">            ListPointDetector2D : list[np.ndarray of shape (2,)]</span>
</span><span id="Detector.get_PointList2D-225"><a href="#Detector.get_PointList2D-225"><span class="linenos">225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.get_PointList2D-226"><a href="#Detector.get_PointList2D-226"><span class="linenos">226</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iscomplete</span><span class="p">():</span>
</span><span id="Detector.get_PointList2D-227"><a href="#Detector.get_PointList2D-227"><span class="linenos">227</span></a>            <span class="n">ListPointDetector3D</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_PointList3D</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector.get_PointList2D-228"><a href="#Detector.get_PointList2D-228"><span class="linenos">228</span></a>
</span><span id="Detector.get_PointList2D-229"><a href="#Detector.get_PointList2D-229"><span class="linenos">229</span></a>            <span class="n">ListPointDetector3D</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Detector.get_PointList2D-230"><a href="#Detector.get_PointList2D-230"><span class="linenos">230</span></a>                <span class="n">k</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">centre</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ListPointDetector3D</span>
</span><span id="Detector.get_PointList2D-231"><a href="#Detector.get_PointList2D-231"><span class="linenos">231</span></a>            <span class="p">]</span>  <span class="c1"># Equivalent to taking the detector&#39;s central point as the origin</span>
</span><span id="Detector.get_PointList2D-232"><a href="#Detector.get_PointList2D-232"><span class="linenos">232</span></a>            <span class="n">ListPointDetector3D</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationPointList</span><span class="p">(</span><span class="n">ListPointDetector3D</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</span><span id="Detector.get_PointList2D-233"><a href="#Detector.get_PointList2D-233"><span class="linenos">233</span></a>
</span><span id="Detector.get_PointList2D-234"><a href="#Detector.get_PointList2D-234"><span class="linenos">234</span></a>            <span class="n">ListPointDetector2D</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ListPointDetector3D</span><span class="p">]</span>
</span><span id="Detector.get_PointList2D-235"><a href="#Detector.get_PointList2D-235"><span class="linenos">235</span></a>            <span class="k">return</span> <span class="n">ListPointDetector2D</span>
</span></pre></div>


            <div class="docstring"><p>Returns the list of 2D-points in the detector plane, with the origin at Detector.centre.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>RayList : list[Ray]
    A list of objects of the ModuleOpticalRay.Ray-class.
</code></pre>

<h2 id="returns">Returns</h2>

<pre><code>ListPointDetector2D : list[np.ndarray of shape (2,)]
</code></pre>
</div>


                            </div>
                            <div id="Detector.get_PointList2DCentre" class="classattr">
                                        <input id="Detector.get_PointList2DCentre-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_PointList2DCentre</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">RayList</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Detector.get_PointList2DCentre-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.get_PointList2DCentre"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.get_PointList2DCentre-237"><a href="#Detector.get_PointList2DCentre-237"><span class="linenos">237</span></a>    <span class="k">def</span> <span class="nf">get_PointList2DCentre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="Detector.get_PointList2DCentre-238"><a href="#Detector.get_PointList2DCentre-238"><span class="linenos">238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.get_PointList2DCentre-239"><a href="#Detector.get_PointList2DCentre-239"><span class="linenos">239</span></a><span class="sd">        Returns the list of 2D-points in the detector plane, with the origin centered in the point cloud.</span>
</span><span id="Detector.get_PointList2DCentre-240"><a href="#Detector.get_PointList2DCentre-240"><span class="linenos">240</span></a>
</span><span id="Detector.get_PointList2DCentre-241"><a href="#Detector.get_PointList2DCentre-241"><span class="linenos">241</span></a><span class="sd">        Parameters</span>
</span><span id="Detector.get_PointList2DCentre-242"><a href="#Detector.get_PointList2DCentre-242"><span class="linenos">242</span></a><span class="sd">        ----------</span>
</span><span id="Detector.get_PointList2DCentre-243"><a href="#Detector.get_PointList2DCentre-243"><span class="linenos">243</span></a><span class="sd">            RayLis* : list[Ray]</span>
</span><span id="Detector.get_PointList2DCentre-244"><a href="#Detector.get_PointList2DCentre-244"><span class="linenos">244</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector.get_PointList2DCentre-245"><a href="#Detector.get_PointList2DCentre-245"><span class="linenos">245</span></a>
</span><span id="Detector.get_PointList2DCentre-246"><a href="#Detector.get_PointList2DCentre-246"><span class="linenos">246</span></a><span class="sd">        Returns</span>
</span><span id="Detector.get_PointList2DCentre-247"><a href="#Detector.get_PointList2DCentre-247"><span class="linenos">247</span></a><span class="sd">        ----------</span>
</span><span id="Detector.get_PointList2DCentre-248"><a href="#Detector.get_PointList2DCentre-248"><span class="linenos">248</span></a><span class="sd">            ListPointDetector2DCentre : list[np.ndarray of shape (2,)]</span>
</span><span id="Detector.get_PointList2DCentre-249"><a href="#Detector.get_PointList2DCentre-249"><span class="linenos">249</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.get_PointList2DCentre-250"><a href="#Detector.get_PointList2DCentre-250"><span class="linenos">250</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iscomplete</span><span class="p">():</span>
</span><span id="Detector.get_PointList2DCentre-251"><a href="#Detector.get_PointList2DCentre-251"><span class="linenos">251</span></a>            <span class="n">ListPointDetector2D</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_PointList2D</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector.get_PointList2DCentre-252"><a href="#Detector.get_PointList2DCentre-252"><span class="linenos">252</span></a>            <span class="n">ListPointDetector2DCentre</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">CentrePointList</span><span class="p">(</span><span class="n">ListPointDetector2D</span><span class="p">)</span>
</span><span id="Detector.get_PointList2DCentre-253"><a href="#Detector.get_PointList2DCentre-253"><span class="linenos">253</span></a>            <span class="k">return</span> <span class="n">ListPointDetector2DCentre</span>
</span></pre></div>


            <div class="docstring"><p>Returns the list of 2D-points in the detector plane, with the origin centered in the point cloud.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>RayLis* : list[Ray]
    A list of objects of the ModuleOpticalRay.Ray-class.
</code></pre>

<h2 id="returns">Returns</h2>

<pre><code>ListPointDetector2DCentre : list[np.ndarray of shape (2,)]
</code></pre>
</div>


                            </div>
                            <div id="Detector.get_Delays" class="classattr">
                                        <input id="Detector.get_Delays-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_Delays</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">RayList</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Detector.get_Delays-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Detector.get_Delays"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="Detector.get_Delays-255"><a href="#Detector.get_Delays-255"><span class="linenos">255</span></a>    <span class="k">def</span> <span class="nf">get_Delays</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RayList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
</span><span id="Detector.get_Delays-256"><a href="#Detector.get_Delays-256"><span class="linenos">256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Detector.get_Delays-257"><a href="#Detector.get_Delays-257"><span class="linenos">257</span></a><span class="sd">        Returns the list of delays of the rays of RayList as they hit the detector plane,</span>
</span><span id="Detector.get_Delays-258"><a href="#Detector.get_Delays-258"><span class="linenos">258</span></a><span class="sd">        calculated as their total path length divided by the speed of light.</span>
</span><span id="Detector.get_Delays-259"><a href="#Detector.get_Delays-259"><span class="linenos">259</span></a><span class="sd">        The delays are relative to the mean travel time, i.e. the mean path length of RayList</span>
</span><span id="Detector.get_Delays-260"><a href="#Detector.get_Delays-260"><span class="linenos">260</span></a><span class="sd">        divided by the speed of light.</span>
</span><span id="Detector.get_Delays-261"><a href="#Detector.get_Delays-261"><span class="linenos">261</span></a><span class="sd">        The list index corresponds to that of the RayList.</span>
</span><span id="Detector.get_Delays-262"><a href="#Detector.get_Delays-262"><span class="linenos">262</span></a>
</span><span id="Detector.get_Delays-263"><a href="#Detector.get_Delays-263"><span class="linenos">263</span></a><span class="sd">        Parameters</span>
</span><span id="Detector.get_Delays-264"><a href="#Detector.get_Delays-264"><span class="linenos">264</span></a><span class="sd">        ----------</span>
</span><span id="Detector.get_Delays-265"><a href="#Detector.get_Delays-265"><span class="linenos">265</span></a><span class="sd">            RayList : list[Ray]</span>
</span><span id="Detector.get_Delays-266"><a href="#Detector.get_Delays-266"><span class="linenos">266</span></a><span class="sd">                A list of objects of the ModuleOpticalRay.Ray-class.</span>
</span><span id="Detector.get_Delays-267"><a href="#Detector.get_Delays-267"><span class="linenos">267</span></a>
</span><span id="Detector.get_Delays-268"><a href="#Detector.get_Delays-268"><span class="linenos">268</span></a><span class="sd">        Returns</span>
</span><span id="Detector.get_Delays-269"><a href="#Detector.get_Delays-269"><span class="linenos">269</span></a><span class="sd">        ----------</span>
</span><span id="Detector.get_Delays-270"><a href="#Detector.get_Delays-270"><span class="linenos">270</span></a><span class="sd">            DelayList : list[float]</span>
</span><span id="Detector.get_Delays-271"><a href="#Detector.get_Delays-271"><span class="linenos">271</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Detector.get_Delays-272"><a href="#Detector.get_Delays-272"><span class="linenos">272</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iscomplete</span><span class="p">():</span>
</span><span id="Detector.get_Delays-273"><a href="#Detector.get_Delays-273"><span class="linenos">273</span></a>            <span class="n">DetectorPointList3D</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_PointList3D</span><span class="p">(</span><span class="n">RayList</span><span class="p">)</span>
</span><span id="Detector.get_Delays-274"><a href="#Detector.get_Delays-274"><span class="linenos">274</span></a>            <span class="n">OpticalPathList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Detector.get_Delays-275"><a href="#Detector.get_Delays-275"><span class="linenos">275</span></a>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">RayList</span><span class="p">)):</span>
</span><span id="Detector.get_Delays-276"><a href="#Detector.get_Delays-276"><span class="linenos">276</span></a>                <span class="n">OpticalPathList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">RayList</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">point</span> <span class="o">-</span> <span class="n">DetectorPointList3D</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">RayList</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>
</span><span id="Detector.get_Delays-277"><a href="#Detector.get_Delays-277"><span class="linenos">277</span></a>
</span><span id="Detector.get_Delays-278"><a href="#Detector.get_Delays-278"><span class="linenos">278</span></a>            <span class="n">MeanPath</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">OpticalPathList</span><span class="p">)</span>
</span><span id="Detector.get_Delays-279"><a href="#Detector.get_Delays-279"><span class="linenos">279</span></a>            <span class="n">DelayList</span> <span class="o">=</span> <span class="p">[(</span><span class="n">k</span> <span class="o">-</span> <span class="n">MeanPath</span><span class="p">)</span> <span class="o">/</span> <span class="n">LightSpeed</span> <span class="o">*</span> <span class="mf">1e15</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">OpticalPathList</span><span class="p">]</span>  <span class="c1"># in fs, c in mm/s</span>
</span><span id="Detector.get_Delays-280"><a href="#Detector.get_Delays-280"><span class="linenos">280</span></a>            <span class="k">return</span> <span class="n">DelayList</span>
</span></pre></div>


            <div class="docstring"><p>Returns the list of delays of the rays of RayList as they hit the detector plane,
calculated as their total path length divided by the speed of light.
The delays are relative to the mean travel time, i.e. the mean path length of RayList
divided by the speed of light.
The list index corresponds to that of the RayList.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>RayList : list[Ray]
    A list of objects of the ModuleOpticalRay.Ray-class.
</code></pre>

<h2 id="returns">Returns</h2>

<pre><code>DelayList : list[float]
</code></pre>
</div>


                            </div>
                </section>
</div>


<style>pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
<style>:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
<style>.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>